import{c as h}from"./overlayControls-BKEkg_Gn.js";/* empty css              */import{e as A,h as I,M as G,B as S,d as b}from"./color-CIVhf6zH.js";const e={HEART_RATE:85,OVERLAP_PERCENT:15,TRAIL_LIFE_PERCENT:65,GRID_SIZE:100,CORE_WIDTH:4,COLORS:{trace:"#00ff6a",gridPanel:"#00ff6a",gridMajor:"#00ff6a"},SHOW_GRID:!0,SAMPLE_RESOLUTION:3200,OVERLAY_TEXT_SIZE:18,OVERLAY_TEXT_COLOR:"#00ff6a",OVERLAY_TEXT_GLOW:8,TOTAL_BEATS_SIZE:22,SHOW_GRID_OUTER_BOX:!0,SHOW_GRID_LINES:!0,SHOW_GRID_BACKGROUND:!0,GRID_GAP_PERCENT:0,VIEWPORT_HORIZONTAL_PADDING:.02,VIEWPORT_VERTICAL_PADDING:.02},C=document.getElementById("single-grid-canvas"),c=document.getElementById("single-trace-canvas"),m=document.getElementById("single-bpm"),u=document.getElementById("single-beats"),E=document.getElementById("cfg-hr"),f=document.getElementById("val-hr");let n=null,g=null,R=null,r=null;function y(){window.addEventListener("resize",T),window.ResizeObserver&&new ResizeObserver(T).observe(c.parentElement||c)}function T(){if(!n)return;const o=c.parentElement.getBoundingClientRect();n.updateDimensions(o.width,o.height),r&&r()}function p(){b(C,{rows:1,cols:1,gridSize:e.GRID_SIZE,gridColorMajor:e.COLORS.gridMajor,gridColorPanel:e.COLORS.gridPanel,showGridOuterBox:e.SHOW_GRID_OUTER_BOX,showGridLines:e.SHOW_GRID_LINES,showGridBackground:e.SHOW_GRID_BACKGROUND,gridGapPercent:e.GRID_GAP_PERCENT,viewportHorizontalPadding:e.VIEWPORT_HORIZONTAL_PADDING,viewportVerticalPadding:e.VIEWPORT_VERTICAL_PADDING})}function x(){A({sampleResolution:e.SAMPLE_RESOLUTION}).then(()=>{requestAnimationFrame(()=>{const t=c.parentElement.getBoundingClientRect(),a={rows:1,cols:1,heartRateMode:"manual",manualHeartRate:e.HEART_RATE,overlapPercent:e.OVERLAP_PERCENT,trailLifePercent:e.TRAIL_LIFE_PERCENT,lineWidth:e.CORE_WIDTH,colorCore:I(e.COLORS.trace,.95),gridSize:e.GRID_SIZE,showGrid:e.SHOW_GRID,gridColor:e.COLORS.gridMajor,renderWidth:t.width,renderHeight:t.height,viewportHorizontalPadding:e.VIEWPORT_HORIZONTAL_PADDING,viewportVerticalPadding:e.VIEWPORT_VERTICAL_PADDING};n=new G(c,a),g=new S(n),g.start(),C.getContext("2d"),p(),r=p,R=n.traces[0],n.setHeartRateMode("manual"),n.setManualHeartRate(e.HEART_RATE),setTimeout(()=>{m.textContent=Math.round(e.HEART_RATE),f.textContent=e.HEART_RATE,u.textContent="0"},50),y(),document.documentElement.style.setProperty("--overlay-text-size",e.OVERLAY_TEXT_SIZE+"px"),document.documentElement.style.setProperty("--overlay-text-color",e.OVERLAY_TEXT_COLOR),document.documentElement.style.setProperty("--overlay-text-shadow",O(e.OVERLAY_TEXT_COLOR,e.OVERLAY_TEXT_GLOW));const l=document.getElementById("data-counter");l&&(l.style.color=e.OVERLAY_TEXT_COLOR);const i=document.getElementById("data-counter");i&&(i.style.fontSize=e.TOTAL_BEATS_SIZE+"px");let d=0;(function s(_){if(_-d>200&&R){if(d=_,n.cfg.heartRateMode!=="manual"){const L=n.getCurrentHeartRate();m.textContent=Math.round(L)}u.textContent=R.beatCount}requestAnimationFrame(s)})(performance.now())})})}function P(){E&&E.addEventListener("input",()=>{const o=+E.value;n&&(n.setManualHeartRate(o),n.setHeartRateMode("manual")),f.textContent=o,m.textContent=o})}P();x();h({title:"Single ECG Configuration",sections:[{title:"Grid",fields:[{type:"range",name:"gridSize",label:"Grid Size",value:100,min:20,max:160,step:2},{type:"range",name:"viewportHorizontalPadding",label:"Horizontal Padding %",value:2,min:0,max:20,step:1},{type:"range",name:"viewportVerticalPadding",label:"Vertical Padding %",value:2,min:0,max:20,step:1},{type:"checkbox",name:"showGridOuterBox",label:"Show Outer Box",value:!0},{type:"checkbox",name:"showGridLines",label:"Show Grid Lines",value:!0},{type:"checkbox",name:"showGridBackground",label:"Show Background",value:!0}]},{title:"Trace",fields:[{type:"range",name:"coreWidth",label:"Core Width",value:4,min:.5,max:16,step:.1},{type:"range",name:"headSize",label:"Head Dot Size",value:10,min:2,max:28,step:.5},{type:"range",name:"edgeFeather",label:"Edge Feather",value:.22,min:0,max:.95,step:.01},{type:"range",name:"edgeFade",label:"Edge Fade (Longitudinal)",value:.06,min:0,max:.25,step:.005},{type:"range",name:"trail",label:"Trail % Beat",value:65,min:5,max:200,step:1},{type:"range",name:"overlap",label:"Overlap %",value:15,min:0,max:80,step:1},{type:"color",name:"coreColor",label:"Core Color",value:"#00ff6a"}]},{title:"Text",fields:[{type:"range",name:"textSize",label:"Overlay Text Size",value:18,min:8,max:28,step:1},{type:"range",name:"totalSize",label:"Total Beats Size",value:22,min:10,max:60,step:1},{type:"range",name:"textGlow",label:"Text Glow",value:8,min:0,max:24,step:.5},{type:"color",name:"textColor",label:"Text Color",value:"#00ff6a"}]}],onChange:(o,t)=>{const a=n;if(a)switch(o){case"overlap":a.updateConfig({overlapPercent:+t});break;case"trail":a.updateConfig({trailLifePercent:+t});break;case"coreWidth":a.updateConfig({lineWidth:+t});break;case"headSize":a.updateConfig({headDotRadius:+t});break;case"edgeFeather":a.updateConfig({edgeFeather:+t});break;case"edgeFade":a.updateConfig({edgeSpatialFade:+t});break;case"coreColor":a.updateConfig({colorCore:I(t,.95)}),a._colorCore=new Float32Array(a.cfg.colorCore);break;case"gridSize":e.GRID_SIZE=+t,r&&r();break;case"viewportHorizontalPadding":e.VIEWPORT_HORIZONTAL_PADDING=+t/100,n&&n.updateConfig({viewportHorizontalPadding:+t/100}),r&&r();break;case"viewportVerticalPadding":e.VIEWPORT_VERTICAL_PADDING=+t/100,n&&n.updateConfig({viewportVerticalPadding:+t/100}),r&&r();break;case"showGridOuterBox":e.SHOW_GRID_OUTER_BOX=t,r&&r();break;case"showGridLines":e.SHOW_GRID_LINES=t,r&&r();break;case"showGridBackground":e.SHOW_GRID_BACKGROUND=t,r&&r();break;case"textSize":e.OVERLAY_TEXT_SIZE=+t,document.documentElement.style.setProperty("--overlay-text-size",t+"px");break;case"textGlow":e.OVERLAY_TEXT_GLOW=+t;const l=e.OVERLAY_TEXT_GLOW>0?O(e.OVERLAY_TEXT_COLOR,e.OVERLAY_TEXT_GLOW):"none";document.documentElement.style.setProperty("--overlay-text-shadow",l);break;case"textColor":e.OVERLAY_TEXT_COLOR=t,document.documentElement.style.setProperty("--overlay-text-color",t);const i=document.getElementById("data-counter");if(i&&(i.style.color=t),e.OVERLAY_TEXT_GLOW>0){const s=O(t,e.OVERLAY_TEXT_GLOW);document.documentElement.style.setProperty("--overlay-text-shadow",s)}break;case"totalSize":e.TOTAL_BEATS_SIZE=+t;const d=document.getElementById("data-counter");d&&(d.style.fontSize=t+"px");break}}});function w(o){let t=o.replace("#","");return t.length===3&&(t=t.split("").map(a=>a+a).join("")),[parseInt(t.slice(0,2),16),parseInt(t.slice(2,4),16),parseInt(t.slice(4,6),16)]}function O(o,t){const[a,l,i]=w(o);if(t<=0)return"none";if(t<4)return`0 0 ${t}px rgba(${a},${l},${i},0.65)`;const d=Math.round(t*.4),s=Math.round(t*.75);return`0 0 ${d}px rgba(${a},${l},${i},0.55), 0 0 ${s}px rgba(${a},${l},${i},0.35), 0 0 ${t}px rgba(${a},${l},${i},0.22)`}
