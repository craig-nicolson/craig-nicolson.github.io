import{r as w,c as v}from"./overlayControls-CFepzlKg.js";/* empty css              */import{h,d as y,e as S,M as R,B as x}from"./color-D1U2lwmM.js";const t={"ECG Trace Width":{value:5,type:"range",min:.5,max:16,step:.1,label:"Trace Width",section:"ECG Display"},"ECG Head Size":{value:13,type:"range",min:2,max:28,step:.5,label:"Head Dot Size",section:"ECG Display"},"ECG Trail Life":{value:85,type:"range",min:5,max:200,step:1,label:"Trail Life (%)",section:"ECG Display"},"ECG Trace Color":{value:"#00ff6a",type:"color",label:"Trace Color",section:"ECG Display"},"ECG Grid Size":{value:110,type:"range",min:20,max:160,step:2,label:"Grid Size",section:"ECG Grid"},"ECG Horizontal Padding":{value:2,type:"range",min:0,max:20,step:1,label:"Horizontal Padding (%)",section:"ECG Grid"},"ECG Vertical Padding":{value:2,type:"range",min:0,max:20,step:1,label:"Vertical Padding (%)",section:"ECG Grid"},"ECG Show Outer Box":{value:!0,type:"checkbox",label:"Show Outer Box",section:"ECG Grid"},"ECG Show Grid Lines":{value:!0,type:"checkbox",label:"Show Grid Lines",section:"ECG Grid"},"ECG Show Background":{value:!0,type:"checkbox",label:"Show Background",section:"ECG Grid"},"Internal: ECG Sample Resolution":3200,"Internal: ECG Heart Rate":62,"Internal: ECG Show Grid":!0,"Internal: ECG Grid Color Major":"#00ff6a","Internal: ECG Grid Color Panel":"#00ff6a","Internal: ECG Grid Gap Percent":0};w("config",t,{onChange:(e,a,r)=>{if(n)switch(e){case"ECG Trace Width":n.cfg.lineWidth=a;break;case"ECG Head Size":n.cfg.headDotRadius=a;break;case"ECG Trail Life":n.cfg.trailLifePercent=a;break;case"ECG Trace Color":n.cfg.colorCore=h(a,.95),n._colorCore=new Float32Array(n.cfg.colorCore);break}["ECG Grid Size","ECG Horizontal Padding","ECG Vertical Padding","ECG Show Outer Box","ECG Show Grid Lines","ECG Show Background"].includes(e)&&u()}});const i=document.getElementById("single-grid-canvas"),d=document.getElementById("single-trace-canvas"),C=document.getElementById("single-bpm"),G=document.getElementById("single-beats"),s=document.getElementById("cfg-hr"),m=document.getElementById("val-hr");let n=null,g=null,o=null;function u(){if(!t["Internal: ECG Show Grid"]){const e=i.getContext("2d");if(e){const a=i.parentElement,r=a?a.getBoundingClientRect():null,l=r?r.width:i.clientWidth,c=r?r.height:i.clientHeight;e.clearRect(0,0,l,c)}return}y(i,{rows:1,cols:1,gridSize:t["ECG Grid Size"].value,gridColorMajor:t["Internal: ECG Grid Color Major"],gridColorPanel:t["Internal: ECG Grid Color Panel"],showGridOuterBox:t["ECG Show Outer Box"].value,showGridLines:t["ECG Show Grid Lines"].value,showGridBackground:t["ECG Show Background"].value,gridGapPercent:t["Internal: ECG Grid Gap Percent"],viewportHorizontalPadding:t["ECG Horizontal Padding"].value/100,viewportVerticalPadding:t["ECG Vertical Padding"].value/100})}function H(){S({sampleResolution:t["Internal: ECG Sample Resolution"]}).then(()=>{requestAnimationFrame(()=>{const a=d.parentElement.getBoundingClientRect(),r={rows:1,cols:1,heartRateMode:"manual",trailLifePercent:t["ECG Trail Life"].value,lineWidth:t["ECG Trace Width"].value,colorCore:h(t["ECG Trace Color"].value,.95),gridSize:t["ECG Grid Size"].value,viewportHorizontalPadding:t["ECG Horizontal Padding"].value/100,viewportVerticalPadding:t["ECG Vertical Padding"].value/100,manualHeartRate:t["Internal: ECG Heart Rate"],renderWidth:a.width,renderHeight:a.height};n=new R(d,r),g=new x(n),g.start(),i.getContext("2d"),t["Internal: ECG Show Grid"]&&u(),o=n.traces[0],n.setHeartRateMode("manual"),n.setManualHeartRate(t["Internal: ECG Heart Rate"]),setTimeout(()=>{C.textContent=Math.round(t["Internal: ECG Heart Rate"]),m.textContent=t["Internal: ECG Heart Rate"],G.textContent="0"},50);let l=0;(function c(E){if(E-l>200&&o){if(l=E,n.cfg.heartRateMode!=="manual"){const p=n.getCurrentHeartRate();C.textContent=Math.round(p)}G.textContent=o.beatCount}requestAnimationFrame(c)})(performance.now()),b()})})}function b(){let e;window.addEventListener("resize",()=>{clearTimeout(e),e=setTimeout(()=>{I()},100)})}function I(){if(!n||!d)return;const a=d.parentElement.getBoundingClientRect();n.updateDimensions(a.width,a.height),t["Internal: ECG Show Grid"]&&u(),n.resize&&n.resize()}function z(){s&&(s.addEventListener("input",()=>{const e=+s.value;n&&(n.setManualHeartRate(e),n.setHeartRateMode("manual")),m.textContent=e,C.textContent=e}),document.addEventListener("keydown",e=>{(e.key==="r"||e.key==="R")&&f()}))}function f(){o&&(o.beatCount=0,G.textContent="0")}window.addEventListener("message",e=>{e.data==="reset"&&f()});document.addEventListener("keydown",e=>{e.ctrlKey&&(e.key==="ArrowLeft"||e.key==="ArrowRight")&&window.parent.postMessage({type:"keydown",key:e.key,ctrlKey:e.ctrlKey},"*")});z();H();v({title:"Single ECG Configuration"});
