import{c as a}from"./overlayControls-BKEkg_Gn.js";/* empty css              */import{S as d}from"./signalBatchRenderer-Czy3t2Wk.js";const i={BUNDLE_SPACING:.65,PAGE_PERIMETER:2.5,COUNTER_WIDTH:2.5};class u{constructor(){this.renderer=null,this.time=0,this.fpsCounter=0,this.fpsLastTime=performance.now(),this.fpsFrames=0,this.fpsDisplay=null,this.textGlow=.6,this.countersVisible=!1,this.init()}init(){const e=document.getElementById("container");if(!e)throw new Error("Container element not found");this.renderer=new d(e,{mode:"multi",bundleCount:77,bundleSpacing:i.BUNDLE_SPACING,pagePerimeter:i.PAGE_PERIMETER,counterWidth:i.COUNTER_WIDTH,heartRate1:85,heartRate2:26,squareSize:58,spacing:1,activityLevels:{a1:1,a:.8,b:.65,c:.4,d:.3,e:.2,f:.05},rateVariation:.35,showCounters:!1,renderWidth:window.innerWidth,renderHeight:window.innerHeight}),this.setupEventListeners(),this.setupLegendUpdates(),this.setupFPSCounter(),this.countersVisible||this.renderer.setShowCounters(!1),this.renderer.animate()}setupEventListeners(){window.addEventListener("resize",()=>this.handleResize())}handleResize(){this.renderer.updateDimensions(window.innerWidth,window.innerHeight)}setupLegendUpdates(){let e=0,n=0;const s=r=>{if(r-n>=50){const l=this.renderer.getTotalPulseCount();e+=(l-e)*.1;const o=document.getElementById("data-counter");o&&(o.textContent="Total Pulses: "+Math.round(e)),n=r}requestAnimationFrame(s)};requestAnimationFrame(s)}setupFPSCounter(){this.fpsDisplay=document.getElementById("fps-value"),document.addEventListener("keydown",e=>{e.altKey&&e.key==="p"&&(e.preventDefault(),this.toggleFPSCounter()),(e.key==="t"||e.key==="T")&&(e.preventDefault(),this.toggleCounters())})}toggleFPSCounter(){const e=document.getElementById("fps-counter");e.style.display=e.style.display==="none"?"block":"none"}toggleCounters(){this.countersVisible=!this.countersVisible,console.log("Counters "+(this.countersVisible?"enabled":"disabled")),this.renderer.setShowCounters(this.countersVisible)}setBundleSpacing(e){i.BUNDLE_SPACING=e,this.renderer.setBundleSpacing(e)}setPagePerimeter(e){i.PAGE_PERIMETER=e,this.renderer.setPagePerimeter(e)}setCounterWidth(e){i.COUNTER_WIDTH=e,this.renderer.setCounterWidth(e)}updateText({glow:e,size:n,color:s}){typeof e=="number"&&(this.textGlow=e),this.renderer.updateText({glow:e,size:n,color:s})}dispose(){this.renderer&&this.renderer.dispose()}}document.addEventListener("DOMContentLoaded",()=>{try{const t=new u;window.signalMultiInstance=t,typeof a=="function"&&a({title:"Signal Multi Configuration",sections:[{title:"Bundle Spacing",fields:[{type:"range",name:"bundleSpacing",label:"Bundle Spacing (squares)",value:.65,min:.1,max:2,step:.05},{type:"range",name:"pagePerimeter",label:"Page Perimeter (squares)",value:2.5,min:0,max:10,step:.5},{type:"range",name:"counterWidth",label:"Counter Width (squares)",value:2.5,min:1,max:5,step:.1}]},{title:"Visual Effects",fields:[{type:"range",name:"textGlow",label:"Text Glow",value:.6,min:0,max:1,step:.05}]},{title:"Controls",fields:[{type:"checkbox",name:"countersVisible",label:"Show Counters",value:!1}]}],onChange:(e,n)=>{switch(e){case"bundleSpacing":t.setBundleSpacing(n);break;case"pagePerimeter":t.setPagePerimeter(n);break;case"counterWidth":t.setCounterWidth(n);break;case"textGlow":t.textGlow=n,t.renderer.updateText({glow:n});break;case"countersVisible":t.countersVisible=n,t.renderer.setShowCounters(n);break}}})}catch(t){console.error("Failed to initialize SignalMulti:",t),c(t)}});function c(t){const e=document.createElement("div");Object.assign(e.style,{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"rgba(255, 0, 0, 0.9)",color:"white",padding:"20px",borderRadius:"10px",fontFamily:"monospace",maxWidth:"80vw",maxHeight:"80vh",overflow:"auto"}),e.innerHTML="<h2>Initialization Error</h2><pre>"+t.message+"</pre><pre>"+t.stack+"</pre>",document.body.appendChild(e)}
