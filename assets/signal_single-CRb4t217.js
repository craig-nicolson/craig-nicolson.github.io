import{c as T}from"./overlayControls-BKEkg_Gn.js";/* empty css              */import{S as E}from"./signalBatchRenderer-Czy3t2Wk.js";const t={HEART_RATE_1:85,HEART_RATE_2:26,SQUARE_SIZE:58,SPACING:1,ACTIVITY_LEVELS:{a1:1,a:1,b:1,c:1,d:1,e:1,f:1},RATE_VARIATION:.35,TEXT_SIZE:18,TEXT_COLOR:"#00ff6a",TEXT_GLOW:8},i=document.getElementById("single-container"),l=document.getElementById("single-pulses");let a=null;function g(){const n=i.getBoundingClientRect();a=new E(i,{mode:"single",heartRate1:t.HEART_RATE_1,heartRate2:t.HEART_RATE_2,squareSize:t.SQUARE_SIZE,spacing:t.SPACING,activityLevels:t.ACTIVITY_LEVELS,rateVariation:t.RATE_VARIATION,showCounters:!1,renderWidth:n.width,renderHeight:n.height}),R(),document.documentElement.style.setProperty("--overlay-text-size",t.TEXT_SIZE+"px"),document.documentElement.style.setProperty("--overlay-text-color",t.TEXT_COLOR),document.documentElement.style.setProperty("--overlay-text-shadow",c(t.TEXT_COLOR,t.TEXT_GLOW)),a.animate()}function R(){window.addEventListener("resize",d),window.ResizeObserver&&new ResizeObserver(d).observe(i)}function d(){if(!a)return;const n=i.getBoundingClientRect();a.updateDimensions(n.width,n.height)}function h(n){let e=n.replace("#","");return e.length===3&&(e=e.split("").map(r=>r+r).join("")),[parseInt(e.slice(0,2),16),parseInt(e.slice(2,4),16),parseInt(e.slice(4,6),16)]}function c(n,e){const[r,o,s]=h(n);if(e<=0)return"none";if(e<4)return`0 0 ${e}px rgba(${r},${o},${s},0.65)`;const p=Math.round(e*.4),m=Math.round(e*.75);return`0 0 ${p}px rgba(${r},${o},${s},0.55), 0 0 ${m}px rgba(${r},${o},${s},0.35), 0 0 ${e}px rgba(${r},${o},${s},0.22)`}T({title:"Signal Single Configuration",sections:[{title:"Bundle Layout",fields:[{type:"range",name:"squareSize",label:"Square Size",value:58,min:20,max:120,step:2},{type:"range",name:"spacing",label:"Spacing",value:1,min:.5,max:5,step:.1}]},{title:"Pulse Rates",fields:[{type:"range",name:"heartRate1",label:"Primary Rate (BPM)",value:85,min:30,max:180,step:1},{type:"range",name:"heartRate2",label:"Secondary Rate (BPM)",value:26,min:10,max:100,step:1},{type:"range",name:"rateVariation",label:"Rate Variation (%)",value:35,min:0,max:100,step:1}]},{title:"Visual Effects",fields:[{type:"range",name:"textGlow",label:"Text Glow",value:8,min:0,max:24,step:.5},{type:"color",name:"textColor",label:"Text Color",value:"#00ff6a"}]},{title:"Controls",fields:[{type:"button",name:"resetPulses",label:"Reset Pulse Count"}]}],onChange:(n,e)=>{if(a)switch(n){case"squareSize":t.SQUARE_SIZE=+e,a.updateConfig({squareSize:+e});break;case"spacing":t.SPACING=+e,a.updateConfig({spacing:+e});break;case"heartRate1":t.HEART_RATE_1=+e,a.setHeartRate1(+e);break;case"heartRate2":t.HEART_RATE_2=+e,a.setHeartRate2(+e);break;case"rateVariation":t.RATE_VARIATION=+e/100,a.updateConfig({rateVariation:+e/100});break;case"textGlow":t.TEXT_GLOW=+e;const r=t.TEXT_GLOW>0?c(t.TEXT_COLOR,t.TEXT_GLOW):"none";document.documentElement.style.setProperty("--overlay-text-shadow",r),a.updateText({glow:+e});break;case"textColor":if(t.TEXT_COLOR=e,document.documentElement.style.setProperty("--overlay-text-color",e),t.TEXT_GLOW>0){const s=c(e,t.TEXT_GLOW);document.documentElement.style.setProperty("--overlay-text-shadow",s)}a.updateText({color:e});break;case"resetPulses":const o=a.getBundles();o.length>0&&(o[0].resetPulseCount(),l&&(l.textContent="0"));break}}});function u(){if(!a||!l)return;const n=a.getBundles();if(n.length>0){const e=n[0].getPulseCount();l.textContent=e}requestAnimationFrame(u)}document.addEventListener("DOMContentLoaded",()=>{try{g(),u(),window.signalSingleInstance={renderer:a}}catch(n){console.error("Failed to initialize SignalSingle:",n),f(n)}});function f(n){const e=document.createElement("div");Object.assign(e.style,{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"rgba(255, 0, 0, 0.9)",color:"white",padding:"20px",borderRadius:"10px",fontFamily:"monospace",maxWidth:"80vw",maxHeight:"80vh",overflow:"auto"}),e.innerHTML=`
    <h2>Initialization Error</h2>
    <pre style="white-space: pre-wrap; word-wrap: break-word;">${n.message}</pre>
    <pre style="white-space: pre-wrap; word-wrap: break-word;">${n.stack}</pre>
  `,document.body.appendChild(e)}
