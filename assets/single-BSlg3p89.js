import{r as S,c as T}from"./overlayControls_new-C67KsuMk.js";/* empty css              */import{h as v,e as z,M as b,B as I,d as P}from"./color-8XwccIkK.js";const e={"ECG: Trace Width":{value:4,type:"range",min:.5,max:16,step:.1,label:"ECG: Trace Width"},"ECG: Head Size":{value:10,type:"range",min:2,max:28,step:.5,label:"ECG: Head Dot Size"},"ECG: Trail Life":{value:65,type:"range",min:5,max:200,step:1,label:"ECG: Trail Life %"},"ECG: Overlap":{value:15,type:"range",min:0,max:80,step:1,label:"ECG: Overlap %"},"ECG: Trace Color":{value:"#00ff6a",type:"color",label:"ECG: Trace Color"},"ECG: Grid Size":{value:100,type:"range",min:20,max:160,step:2,label:"ECG: Grid Size"},"ECG: Horizontal Padding":{value:2,type:"range",min:0,max:20,step:1,label:"ECG: Horizontal Padding %"},"ECG: Vertical Padding":{value:2,type:"range",min:0,max:20,step:1,label:"ECG: Vertical Padding %"},"ECG: Show Outer Box":{value:!0,type:"checkbox",label:"ECG: Show Outer Box"},"ECG: Show Grid Lines":{value:!0,type:"checkbox",label:"ECG: Show Grid Lines"},"ECG: Show Background":{value:!0,type:"checkbox",label:"ECG: Show Background"},"ECG: Text Size":{value:18,type:"range",min:8,max:28,step:1,label:"ECG: Text Size"},"ECG: Total Size":{value:22,type:"range",min:10,max:60,step:1,label:"ECG: Total Beats Size"},"ECG: Text Glow":{value:8,type:"range",min:0,max:24,step:.5,label:"ECG: Text Glow"},"ECG: Text Color":{value:"#00ff6a",type:"color",label:"ECG: Text Color"},"Internal: ECG Sample Resolution":3200,"Internal: ECG Heart Rate":85,"Internal: ECG Show Grid":!0,"Internal: ECG Grid Color":"#00ff6a","Internal: ECG Grid Color Major":"#00ff6a","Internal: ECG Grid Color Panel":"#00ff6a","Internal: ECG Grid Gap Percent":0};S("config",e,{onChange:(t,n,o)=>{if(["ECG: Trace Width","ECG: Head Size","ECG: Trail Life","ECG: Overlap","ECG: Trace Color","ECG: Grid Size","ECG: Horizontal Padding","ECG: Vertical Padding","ECG: Show Outer Box","ECG: Show Grid Lines","ECG: Show Background"].includes(t)){if(!a)return;const r={};t==="ECG: Trace Width"?r.lineWidth=n:t==="ECG: Head Size"?r.headDotRadius=n:t==="ECG: Trail Life"?r.trailLifePercent=n:t==="ECG: Overlap"?r.overlapPercent=n:t==="ECG: Trace Color"?(r.colorCore=v(n,.95),a._colorCore=new Float32Array(a.cfg.colorCore)):(t==="ECG: Grid Size"||t==="ECG: Horizontal Padding"||t==="ECG: Vertical Padding"||t==="ECG: Show Outer Box"||t==="ECG: Show Grid Lines"||t==="ECG: Show Background")&&s&&s(),Object.keys(r).length>0&&a.updateConfig(r);return}if(t==="ECG: Text Size")document.documentElement.style.setProperty("--overlay-text-size",n+"px");else if(t==="ECG: Text Glow"){const r=n>0?g(e["ECG: Text Color"].value,n):"none";document.documentElement.style.setProperty("--overlay-text-shadow",r)}else if(t==="ECG: Text Color"){document.documentElement.style.setProperty("--overlay-text-color",n);const r=document.getElementById("data-counter");if(r&&(r.style.color=n),e["ECG: Text Glow"].value>0){const i=g(n,e["ECG: Text Glow"].value);document.documentElement.style.setProperty("--overlay-text-shadow",i)}}else if(t==="ECG: Total Size"){const r=document.getElementById("data-counter");r&&(r.style.fontSize=n+"px")}}});const d=document.getElementById("single-grid-canvas"),c=document.getElementById("single-trace-canvas"),E=document.getElementById("single-bpm"),h=document.getElementById("single-beats"),G=document.getElementById("cfg-hr"),y=document.getElementById("val-hr");let a=null,m=null,u=null,s=null;function R(){window.addEventListener("resize",f),window.ResizeObserver&&new ResizeObserver(f).observe(c.parentElement||c)}function f(){if(!a)return;const t=c.parentElement.getBoundingClientRect();a.updateDimensions(t.width,t.height),s&&s()}function x(){if(e["Internal: ECG Show Grid"])P(d,{rows:1,cols:1,gridSize:e["ECG: Grid Size"].value,gridColorMajor:e["Internal: ECG Grid Color Major"],gridColorPanel:e["Internal: ECG Grid Color Panel"],showGridOuterBox:e["ECG: Show Outer Box"].value,showGridLines:e["ECG: Show Grid Lines"].value,showGridBackground:e["ECG: Show Background"].value,gridGapPercent:e["Internal: ECG Grid Gap Percent"],viewportHorizontalPadding:e["ECG: Horizontal Padding"].value/100,viewportVerticalPadding:e["ECG: Vertical Padding"].value/100});else{const t=d.getContext("2d");if(t){const n=d.parentElement,o=n?n.getBoundingClientRect():null,l=o?o.width:d.clientWidth,r=o?o.height:d.clientHeight;t.clearRect(0,0,l,r)}}}function B(){z({sampleResolution:e["Internal: ECG Sample Resolution"]}).then(()=>{requestAnimationFrame(()=>{const n=c.parentElement.getBoundingClientRect(),o={rows:1,cols:1,heartRateMode:"manual",manualHeartRate:e["Internal: ECG Heart Rate"],overlapPercent:e["ECG: Overlap"].value,trailLifePercent:e["ECG: Trail Life"].value,lineWidth:e["ECG: Trace Width"].value,colorCore:v(e["ECG: Trace Color"].value,.95),gridSize:e["ECG: Grid Size"].value,showGrid:e["Internal: ECG Show Grid"],gridColor:e["Internal: ECG Grid Color"],renderWidth:n.width,renderHeight:n.height,viewportHorizontalPadding:e["ECG: Horizontal Padding"].value/100,viewportVerticalPadding:e["ECG: Vertical Padding"].value/100};a=new b(c,o),m=new I(a),m.start(),d.getContext("2d"),e["Internal: ECG Show Grid"]&&x(),s=x,u=a.traces[0],a.setHeartRateMode("manual"),a.setManualHeartRate(e["Internal: ECG Heart Rate"]),setTimeout(()=>{E.textContent=Math.round(e["Internal: ECG Heart Rate"]),y.textContent=e["Internal: ECG Heart Rate"],h.textContent="0"},50),R(),document.documentElement.style.setProperty("--overlay-text-size",e["ECG: Text Size"].value+"px"),document.documentElement.style.setProperty("--overlay-text-color",e["ECG: Text Color"].value),document.documentElement.style.setProperty("--overlay-text-shadow",g(e["ECG: Text Color"].value,e["ECG: Text Glow"].value));const l=document.getElementById("data-counter");l&&(l.style.color=e["ECG: Text Color"].value);const r=document.getElementById("data-counter");r&&(r.style.fontSize=e["ECG: Total Size"].value+"px");let i=0;(function C(p){if(p-i>200&&u){if(i=p,a.cfg.heartRateMode!=="manual"){const w=a.getCurrentHeartRate();E.textContent=Math.round(w)}h.textContent=u.beatCount}requestAnimationFrame(C)})(performance.now())})})}function H(){G&&G.addEventListener("input",()=>{const t=+G.value;a&&(a.setManualHeartRate(t),a.setHeartRateMode("manual")),y.textContent=t,E.textContent=t})}H();B();T({title:"Single ECG Configuration"});function O(t){let n=t.replace("#","");return n.length===3&&(n=n.split("").map(o=>o+o).join("")),[parseInt(n.slice(0,2),16),parseInt(n.slice(2,4),16),parseInt(n.slice(4,6),16)]}function g(t,n){const[o,l,r]=O(t);if(n<=0)return"none";if(n<4)return`0 0 ${n}px rgba(${o},${l},${r},0.65)`;const i=Math.round(n*.4),C=Math.round(n*.75);return`0 0 ${i}px rgba(${o},${l},${r},0.55), 0 0 ${C}px rgba(${o},${l},${r},0.35), 0 0 ${n}px rgba(${o},${l},${r},0.22)`}
